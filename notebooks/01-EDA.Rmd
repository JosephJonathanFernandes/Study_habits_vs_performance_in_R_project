---
title: "01 - Exploratory Data Analysis"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
library(tidyverse)
library(skimr)
library(naniar)
```

## Load data

```{r}
df <- readr::read_csv('data/processed/features.csv', show_col_types = FALSE)
if (requireNamespace('skimr', quietly = TRUE)) {
  skimr::skim(df)
} else {
  summary(df)
}
```

## Missingness

```{r}
if (requireNamespace('naniar', quietly = TRUE)) {
  naniar::vis_miss(df)
} else {
  cat("Install naniar package for missingness visualization\n")
}
```

## Distributions

```{r}
num_cols <- df %>% select(where(is.numeric))
num_cols %>% pivot_longer(everything()) %>%
  ggplot(aes(value)) +
  facet_wrap(~name, scales = 'free') +
  geom_histogram(bins = 30)
```

## Correlations with final grade

```{r}
cor_df <- df %>% select(where(is.numeric))
cor_mat <- cor(cor_df, use = 'pairwise.complete.obs')
cor_mat['final_grade', ] %>% sort(decreasing = TRUE) %>% head(10)
```

## Short findings

- Note observations here: which features correlate with `final_grade`, missingness patterns, and potential data issues.
